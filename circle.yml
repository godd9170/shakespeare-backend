machine:
  python:
    version: 3.4.3
  services:
    - postgresql
general:
  build_dir: shakespeare

dependencies:
  pre:
    - sudo -H pip install --upgrade pip
    - sudo apt-get install python-dev
    - sudo apt-get install python3-bs4
    - sudo -H pip install -r ../requirements.txt
database:
  override:
    - echo "CREATE USER shakespeareadmin WITH PASSWORD 'salesforce1';" | psql -U postgres
    - echo "ALTER USER shakespeareadmin CREATEDB;" | psql -U postgres
deployment:
  production:
    branch: master
    commands:
      - eb deploy --profile default
